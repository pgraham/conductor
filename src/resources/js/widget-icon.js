/**
 * CDT.icon
 */
(function ($, CDT, R, undefined) {
  "use strict";

  var DEFAULT_OPTS = {
        width: 32,
        height: 32,
        fill: '#000',
        stroke: 'none'
      },
      
      ICON_PATHS = {
        'question-mark': 'M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.328,24.371h-2.707v-2.596h2.707V24.371zM17.328,19.003v0.858h-2.707v-1.057c0-3.19,3.63-3.696,3.63-5.963c0-1.034-0.924-1.826-2.134-1.826c-1.254,0-2.354,0.924-2.354,0.924l-1.541-1.915c0,0,1.519-1.584,4.137-1.584c2.487,0,4.796,1.54,4.796,4.136C21.156,16.208,17.328,16.627,17.328,19.003z',
        'dollar-sign': 'M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.255,23.88v2.047h-1.958v-2.024c-3.213-0.44-4.621-3.08-4.621-3.08l2.002-1.673c0,0,1.276,2.223,3.586,2.223c1.276,0,2.244-0.683,2.244-1.849c0-2.729-7.349-2.398-7.349-7.459c0-2.2,1.738-3.785,4.137-4.159V5.859h1.958v2.046c1.672,0.22,3.652,1.1,3.652,2.993v1.452h-2.596v-0.704c0-0.726-0.925-1.21-1.959-1.21c-1.32,0-2.288,0.66-2.288,1.584c0,2.794,7.349,2.112,7.349,7.415C21.413,21.614,19.785,23.506,17.255,23.88z',
        'check': 'M2.379,14.729 5.208,11.899 12.958,19.648 25.877,6.733 28.707,9.561 12.958,25.308z',
        'mail': 'M28.516,7.167H3.482l12.517,7.108L28.516,7.167zM16.74,17.303C16.51,17.434,16.255,17.5,16,17.5s-0.51-0.066-0.741-0.197L2.5,10.06v14.773h27V10.06L16.74,17.303z',
        'view': 'M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z',
        'caret-down': 'M1,13.625l12,9c1,1,5,1,6,0l12-9c0-3.5-1.5-5-5-5l-10,7.5l-10-7.5c-3.5,0-5,1.5-5,5Z',
        'caret-up': 'M1,18.375l12,-9c1,-1,5,-1,6,0l12,9c0,3.5,-1.5,5-5,5l-10,-7.5l-10,7.5c-3.5,0,-5,-1.5,-5,-5Z',
        'caret-right': 'M13.625,1l9,12c1,1,1,5,0,6l-9,12c-3.5,0,-5,-1.5,-5,-5l7.5,-10l-7.5,-10c0,-3.5,1.5,-5,5,-5Z',
        'caret-left': 'M18.375,1l-9,12c-1,1,-1,5,0,6l9,12c3.5,0,5,-1.5,5,-5l-7.5,-10l7.5,-10c0,-3.5,-1.5,-5,-5,-5Z',
        'globe': 'm15.470393548909378,8.992906957471671c-0.08008685690112721,0,-0.16818239949236716,0.032958821878540816,-0.2578180739470903,0.08386017996666109c0.21107507189037472,-0.06175928772567695,0.31033657049186797,-0.08386017996666109,0.2578180739470903,-0.08386017996666109m5.226360472137118,1.0191822606600178l0.05213346357890685,-0.7642904372535458l-0.8064900503129859,0.050439318529075315l0.1064231117666902,0.7138511187244704h0.6479334749673888M6.747944397548912,15.507664740005676c-0.16271493137700174,-0.15308910723023164,-0.05382760862873838,-0.8168859403914976,-0.05382760862873838,-0.8168859403914976c0,0,-2.4247836058679746,-1.2740740840664904,-5.064492613285032,-2.0401356729630415c-0.32550686934717765,-0.09433307663834696,-0.1610207863271702,-0.764829483405765,0.1610207863271702,-1.0187972276941473l-0.106808144732561,-0.7159302967401728c-0.05336556906969342,-0.35592447365097113,0.5394311851849962,-2.090574991492117,1.1318429064738151,-2.242431993231562c0.5928737608478638,-0.15401318634832156,-0.05428964818778335,1.0191822606600178,-0.05428964818778335,1.0191822606600178l-0.592026688322948,0.3570795725485835c0,0,0.7001439451394699,0.8156538349007111,0.8623968369574265,0.8156538349007111c0.16109779292034437,0,0.4305438624367329,-0.4089050097547937,0.4305438624367329,-0.4089050097547937l-0.753894547175034,-0.5085515413221579l0.7000669385462956,-0.3071022935785532l0.044201784481968286,-0.26867600358464694l0.11766607437011768,-0.0375022108758163l1.1598733063892097,-1.7564433837094333c0.8014076151634912,-0.3278940737355766,1.7864759550473561,-0.734257865915623,1.9116116689553673,-0.7939379756255976c0.21608050044669516,-0.10134067661719559,1.7239466013899374,-0.9678958696060269,1.9934696774995002,-1.1715013019585079c0.27029314204130434,-0.20529957740231264,0.8614727578393366,-0.15308910723023164,1.076706185761116,-0.15308910723023164c0.2165425400057401,0,0.5390461522191254,-0.10264978870115632,0.5927967542546897,-0.6646439056861817c0.05382760862873838,-0.5606850049010647,0.2695230761095627,-0.662872754043176,0.4317759679275195,-0.5093986138470736c0.16186785885208596,0.15147196877357427,-0.16225289181795677,0.40759589767083304,0.21531043451495352,0.5093986138470736c0.3767932604011687,0.10264978870115632,0.7001439451394699,0.3576186187008027,0.9700520542149034,0.10264978870115632c0.19690585874632913,-0.1865099686678174,-0.0667647162819974,-0.3993561922011978,-0.24411090036208968,-0.559914938969323h2.9913981184434495l0.3238127242973461,-0.9199977686516988l-0.7005289781053405,-0.10172570958306638l-2.587113504279105,-0.25450679044060137v-0.30664025401950823l-0.20606964333405425,0.03511500648741732c0.27991896618807444,-1.5391307777719514,1.9433383853431214,-1.2853940532630919,0.6909031539585705,-2.1761293165086095c-0.07592850086972253,-0.054674681153654155,-1.1715013019585079,1.7263338057783364,-1.4505731956216665,1.6918348520363122c-0.5053172644088431,-0.06684172287517155,-1.1573320888144625,-0.07223218439736281,-1.2962519829006482,0.09217689202947046c-0.18450779724528923,0.21692757297161094,0.4129863591930243,-0.7460398746712696,0.9270053686305475,-1.037971869394513c-0.6132805080390165,0.1806574675865812,-1.712164592634291,-0.3775633263329103,-3.6935442350054477,1.022108511200636c-0.670034367208373,0.47359054802108885,-2.3518583621320444,2.3922868235484787,-3.0439166149882273,3.1299329795637654c-2.923786329636537,3.4518975456249312,-3.159503511342643,6.405023387260822,-3.159503511342643,6.5360116022500705c0,0.2548918234064722,0.6191330091202526,0.3988171460489787,0.6724985781899462,0.7059194396275319c0.05421264159460919,0.3041760430379351,-1.0234176232845966,1.3258995212727003,-1.0234176232845966,1.8357601746788188c0,0.23440806962214542,-0.5394311851849962,2.7810161058916423,0.6453922573926415,5.967702944624763c1.0509089770477722,3.0230478282380298,3.084422082997836,5.689170097113824,3.3455514404514153,5.8560433845222315l0.7488891186187135,-0.3972000075923213c0,0,-1.2391130907654213,-2.193609813159144,-1.2924786598351146,-2.3980623180365406c-0.05336556906969342,-0.20383645213200358,1.4005959166516362,-3.162506768476435,2.1018949606887185,-3.0592409270298853c0.7000669385462956,0.09933850519466741,0.5385841126600804,0.30556216171507,0.9695900146558584,0.05005428556320451c0.4313909349616487,-0.25350570472933726,0.7004519715121664,-2.3470839533552463,1.1852854821366827,-2.5499193197759857c0.4852185435903871,-0.20506855762279014,1.0234176232845966,-0.45965235465656573,0.9699750476217293,-0.9696670212490326c-0.05613780642396321,-0.5116318050491242,-1.8876626184782033,-1.4290113495329015,-2.0486834048053733,-1.5817154237972624m11.691063969107915,-14.997419053633683l-1.4545005318735489,-0.5102456863719894l0.2695230761095627,0.8168859403914976l1.184977455763986,-0.30664025401950823m-5.441747913245245,1.8875086052918548c0.16225289181795677,0,3.393988587557962,-2.1415533561734112,3.071099942378706,-2.1932247801932734c-0.3225036122133853,-0.050439318529075315,-0.3763312208421237,0,-1.239960163290337,-0.10218774914211136c-0.8607026919075951,-0.10180271617624055,-1.7776201968323275,1.2244818380623306,-1.9925455983814102,1.4293963824987725c-0.21577247407399852,0.20383645213200358,-0.1431552567107649,0.8660161468366122,0.16140581929304101,0.8660161468366122m14.83378004313859,15.380603861268307l0.4173757350039514,-0.5414333566075245l-0.4173757350039514,-0.14669755999677628l-0.3128007814734411,0.39304165156091664l-0.3645492120864771,0.5405862840826087l0.31187670235535114,0.14700558636947295l0.3654732912045671,-0.3925026054086975m1.8240551725163465,1.7707666100398272l-0.10442094034416202,-0.7876234349853165h-0.6765029210350024l-0.05251849654477766,0.5897934971208975l-0.6267566618444945,-0.09772136673801002l-0.15524529183910812,-0.6391547233455346l-0.31287778806661526,-0.19705987193267746l-0.3653962846113929,0.4424028777855537l-0.36462621867965134,-0.09764436014483587l-0.10519100627590364,0.3428333528113638l0.4179917877493447,0.10018557771958317v3.194156478271015l1.4753693186237464,0.355385427498752c-0.03426793396250155,0.058448004219188034,-0.05937208333727796,0.1085792963755667,-0.06768879540008732,0.13522357761382633c-0.10503699308955532,0.34475851764071785,0.41629764269951314,0.4939972952122414,0.7811548811586869,0.34475851764071785c0.13499255783430383,-0.05428964818778335,0.9854533728497356,-0.3813366493984442,1.25482243577295,-1.0228785771323776c0.37571516809673045,-0.8936615137861359,0.618362943188511,-2.1803646791331883,0.6835875276070253,-2.59681633501905l-0.16525614895174903,-0.36139194176633654l-1.0430543045440077,0.3940427372721807l-0.5749312246382844,-0.0985684392629258h0.0015401318634832156m-0.5223357215003326,-13.081880048426433c-2.385510243349153,-3.6172307011698543,-8.117264986488287,-5.9810250852438935,-8.117264986488287,-5.9810250852438935l-1.4759083647759657,0.7730691888754001l-0.20961194662006563,-0.34291035940453796l-0.520641576450501,-0.1973678983053741v0.443018930530947l0.46904715902381333,0.3938887240858324l-0.31210772213487364,0.14723660614899542l-1.1999167348397735,0.09764436014483587l-2.711479152255375,1.4752923120305723l0.26035929152183757,1.1798950206144914l-0.3138018671847052,0.09887646563562244l-0.15516828524593398,0.24534300585287624l0.886499900620939,1.326284554238571l0.05167142401986189,0.443480970089992l-0.7297144769183477,0.1473136127421696v0.8844977291984107l-0.41675968225855814,0.09802939311070667l0.05213346357890685,0.688746969349694l-3.5467696684154975,2.459436572796347l0.10434393375098786,1.3747217013451183c0.26028228492866345,0.34460450445436946,2.2946424634036426,2.409767320199013,2.2946424634036426,2.409767320199013c0,0,2.3459288544576338,0.09725932717896506,2.867494510026225,-0.19644381918728415c0.5218736819412876,-0.29501225845020995,0.15593835117767557,0.29501225845020995,0.31326282103248604,0.4426338975650762c0.15524529183910812,0.14808367867391117,0.20861086090880157,1.1798950206144914,0.36377914615473556,1.278386453284243c0.15693943688893966,0.09787537992435835,0,0.6871298308930367,0.20861086090880157,0.8857298346891973c0.2086878675019757,0.1951347071033234,0.2086878675019757,2.5558488274503963,0.2086878675019757,2.5558488274503963c0,0,1.251511152266461,2.113445949664843,1.251511152266461,2.654263253526974c0,0.5406632906757829,-0.05259550313795182,0.4914560776374941,0.9386333641998458,0.4421718580060312c0.9905358079992301,-0.04836014051337297,1.1990696623148576,-0.4421718580060312,1.4077575298168332,-0.5890234311891558c0.20861086090880157,-0.14692857977629875,0.20861086090880157,-0.49153308423066827,0.4171447152244289,-0.7877004415784906c0.21030500595863308,-0.29562831119560323,0.5740841521133686,-1.4245449671288002,1.0439013770689234,-1.8175096120965428c0.46804607331254927,-0.3947357966107482,1.7205583112902743,-0.6899790748404807,1.8239781659231722,-1.3768008793608206c0.10442094034416202,-0.6891320023155648,0.5731600729952787,-1.229949306177696,0.5731600729952787,-1.229949306177696l2.2545990349530793,-2.3847401774174113l-0.06337642618233431,0.32042443419768296l-0.05167142401986189,1.2282551611278645l0.6784280858643565,-0.24542001244605038l-0.05174843061303605,-1.3283637322542734l-0.2428787948713031,-0.2574330409812195l0.03434494055567571,-0.0375022108758163c0,0,-0.1568624302957655,-0.29501225845020995,-0.3645492120864771,-0.29501225845020995c-0.20884188068832404,0,-1.4611230988865267,0.29501225845020995,-1.6688868872704126,0.24611307178461786c-0.20876487409514988,-0.04959224600415955,-1.0956498076819596,-2.4096903136058394,-1.2515881588596351,-2.5064876012257593c-0.15701644348211385,-0.09849143266975163,-1.1465511657700798,-1.7217904167810612,-1.1465511657700798,-1.7217904167810612c0,0,2.2929483183538113,2.753062712569422,2.6583446029652045,3.834543307107336c0.2118451378221163,0.6299139321646352,1.0079392980565904,0.04335471195705252,1.6554107334649344,-0.6137425475980615l0.17110865003298525,0.4180687943425189l0.41637464929268736,-0.09933850519466741l-0.05167142401986189,-0.49137907104431994h0.46881613924429083v0.7371841164562412l-0.15586134458450143,0.3938887240858324l-0.05344257566286758,0.6383846574137928l0.4180687943425189,0.39419675045852903l0.2086878675019757,-0.3433723989635829l0.675809861696435,-0.6400017958704503l0.7825409998358219,-0.39334967793361325l0.2095349400268915,0.39334967793361325l0.1042669271578137,0.5411253302348278l-0.20861086090880157,0.5894854707482008l-0.4171447152244289,0.3442194714884987l-0.2085338543156274,0.8848827621642815v0.44224886459920537l-0.46904715902381333,-0.29539729141608073l-0.05167142401986189,-0.9331658960844804l-0.6776580199326149,0.04990027237685619l-0.3119537089485253,0.8349054831942513l0.46889314583746505,0.6890549957223907l1.0947257285638696,0.1478526588943887l0.8861148676550681,-0.8369076546167794l0.1042669271578137,-1.6205267467570394l0.3948128032039223,-0.5210266094163718c0.25697100142217455,0.6604085430616029,0.44063172614254803,1.3513116970201733,0.44063172614254803,1.9955488555152026c0,0.7059194396275319,0.5589908598512331,-0.35638651321001613,0.285463440896614,-2.5091058253936804c0.00023101977952248235,-0.00007700659317416078,-0.4286957042005531,-5.113391799950624,-2.791874035529199,-7.476416118092922zm-10.428463867424375,2.118066345255292l-2.8154380530404923,-0.09964653156736406l1.198222589789942,-0.9825271223091174h0.6258325827264047l0.9913828805241459,0.6875148638589075v0.394658790017574m3.442656754444032,-0.3441424648953246v0.44224886459920537h-1.1989156491285093l0.1042669271578137,0.29578232438195157l-0.7310235890023083,0.09926149860149325l-0.050824351494946116,0.24403389376891552l-0.5214886489754168,-0.09672028102674594l-0.9394804367247614,-0.19775293127124488l0.15693943688893966,-0.24495797288700544l0.1568624302957655,-0.29616735734782235l0.5214116423822427,-0.540740297268957l0.20945793343371735,0.3938887240858324l0.7810008679723386,-0.04974625919050787l0.41722172181760314,-0.4430959371241211l1.6170614500642022,0.29539729141608073l-0.5224897346866809,0.0985684392629258m0.10357386781924625,-0.6395397563114052l-0.6259095893195789,0.09802939311070667l-0.10341985463289792,-0.443018930530947l0.7810778745655128,-0.09764436014483587l0.10519100627590364,-0.44224886459920537l0.5740071455201945,0.5903325432731166l-0.7309465824091342,0.2937031463662492v0.0008470725249157685m3.025512039219603,15.288503975832011l-0.3654732912045671,0.29547429800925495l0.05190244379938437,0.7376461560152862h0.46881613924429083v-0.637460578295703l0.4189928734606088,-0.5423574357256143v-1.1298407350512871l-0.2621304431648433,-0.05097836468129444l-0.31210772213487364,1.3275166597293577l0,0m-3.4937121257185004,-1.4735211603875666c0,0,-0.3654732912045671,0.09502613597691441,0.05097836468129444,0.2452659992597021c0.41722172181760314,0.14862272482613031,2.0861086090880154,-2.4080731751491817,2.0861086090880154,-2.4080731751491817l-1.4085275957485748,0.8845747357915849l-0.7294064505456509,1.2783094466910692h0.0008470725249157685m-2.838617037585915,9.422141707824442l-0.3120307155416995,-0.2970914364659123l-0.6258325827264047,-0.09926149860149325l-0.10341985463289792,0.2979385089908281l-0.8344434436352063,-0.09841442607657748l-0.0524414899516035,-0.3954288559493156h-0.625524556353708l-0.6775040067462665,0.3954288559493156h-1.198222589789942l-0.10434393375098786,-0.29693742327956396l-1.9283220996741601,-0.19944707632107642l-0.31287778806661526,0.29778449580447974l-0.780692841599642,-0.19682885215315496l-0.1046519601236845,-0.6942914440582336l-0.36462621867965134,-0.050901358088120276l-0.41722172181760314,0.7451928021463539l-1.4071414770714399,-0.05005428556320451c0.2519655728658541,0.11843614030185928,2.352628428063786,1.3725655167362418,5.575508365588764,1.6336178675966466c4.273865921165924,0.3455285835724594,6.306531954591072,-0.6923662792288796,6.306531954591072,-0.6923662792288796l-0.15593835117767557,-0.15023986328278768l-1.8767276822474723,-0.14769864570804037v-0.00100108571126409l-0.00007700659317416078,0z'
      };

  CDT.icon = function (iconName, cfg) {
    var elm, paper, path, tx, ty, sx, sy;

    cfg = $.extend({}, DEFAULT_OPTS, cfg);

    elm = $('<span class="cdt-icon"/>');

    paper = R(elm[0], cfg.width, cfg.height);
    delete cfg.width;
    delete cfg.height;
    path = paper.path(ICON_PATHS[iconName]).attr(cfg);

    // Calculate scale factor and necessary translation based on desired image
    // size.  Scale factor is based on original size of 40x40. Translation is
    tx = cfg.width / 2 - 16;
    ty = cfg.height / 2 - 16;
    sx = cfg.width / 32;
    sy = cfg.height / 32;

    var transform = 't' + tx + ',' + ty + 's' + sx + ',' + sy;

    // Scale the path to the desired size and translate it to the middle of the
    // canvas
    path.transform(transform);

    return elm
      .data('icon-paper', paper)
      .data('icon-path', path);
  };

} (jQuery, CDT, Raphael));
